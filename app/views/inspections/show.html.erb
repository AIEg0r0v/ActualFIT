<div id="openedInspection"class="row-fluid InspectionSelected">
    <div class="span12">
        <div class="row-fluid"  style="text-align: center;">
          <h3 style="margin: 0px;">
            <% if can? :edit, @inspection %>
                <%= link_to "Inspection #{@inspection.name }", edit_inspection_path(@inspection) %>
            <% else %>
                <%= "Inspection #{@inspection.name }" %>
            <% end %>
          </h3>
        </div>
        <div class="row-fluid">
            <%= content_tag :div, id: "artifacts", class: "ArtifactsPanel span4 pull-left"  do -%>
              <div class="row-fluid Artifact-HeaderRow">
                <div class="span12 Artifact-Header">
                  <div class="row-fluid">
                    <% if can? :create, Artifact, inspection_id: @inspection.id %>
                        <%= link_to(image_tag('icon_32/plus_32.png', alt:"add artifact"), new_inspection_artifact_url(@inspection.id), class: "ActionElement") %>
                    <% end %>
                    <% if can? :create, Remark, inspection_id: @inspection.id %>
                        <%= link_to(image_tag('icon_32/up_32.png', alt:"upload remark"), upload_remarks_inspection_url(@inspection.id), class: "ActionElement") %>
                    <% end %>

                    <%= link_to(image_tag('icon_32/save_32.png', alt:"download all artifacts"), download_artifacts_inspection_path(@inspection), class: "ActionElement") %>
                  </div>
                  <div class="row-fluid">

                  </div>
                </div>
              </div>
              <div class="row-fluid ArtifactsRowContainer">
                <div class="span12 Artifacts">
                  <%= content_tag :ul, class: "thumbnails" , data: { url: inspection_artifacts_url(@inspection)} do -%>
                    <% artifacts_html = render partial: 'artifacts/artifact', collection: @inspection.artifacts, as: :art, locals: {inspection: @inspection} %>
                    <%= artifacts_html || 'there is no artifacts'%>
                  <% end -%>
                </div> <!--span12-->
              </div>
            <% end -%>
            <%= content_tag :div, id: "remarks", class: "ArtifactComments span4 pull-left"  do -%>
              <div class="ArtifactCommentsInner">
                <%= content_tag :div, class: "" do -%>
                  <table class="table table-striped table-hover">
                    <caption class="CommentsHeader">
                      <strong>Artifact Remark</strong>
                      <div class="CommentsClose"><strong>hide</strong></div>
                    </caption>
                    <thead>
                    <tr>
                      <th>Location</th>
                      <th>Remark</th>
                      <th>Type</th>
                      <th>Author</th>
                    </tr>
                    </thead>
                    <%= content_tag :tbody, class: "RemarksTable", id: "RemarksTable", data: { url: inspection_remarks_url(@inspection)} do -%>
                        <% remarks_html = render partial: 'remarks/remark', collection: @inspection.remarks, as: :remark, locals: {inspection: @inspection }  %>
                        <%= remarks_html || 'There is no remarks' %>
                    <% end -%>
                  </table>
                <% end -%>
                <% if can? :create, Remark, inspection_id: @inspection.id %>
                    <div class="input-append row-fluid">
                      <%= form_for [@inspection, @inspection.remarks.build], remote: true do |f| %>
                          <%= f.text_field :location, class: "span2 RemarkTypeBox", id: "appendedInputButton" %>
                          <%= f.text_field :content, class: "span6 RemarkTypeBox", id: "appendedInputButton" %>


                          <%= f.text_field :remark_type, class: "span2 RemarkTypeBox", id: "appendedInputButton" %>
                          <%= f.submit "Submit", class: "btn" %>
                      <% end %>
                    </div>
                <% end %>
              </div>
            <% end -%>
            <%= content_tag :div, id: "chat", class: "ChatContainer span4 pull-right"  do -%>
              <div class="Dock">
                <p>-></p>
                <p>c h a t</p>
              </div>

              <div class="ChatInner">
                <div class="row-fluid MessageWindow">
                  <%= content_tag :div, class: "span12 well MessageWindowInner" do -%>
                      <%= content_tag :div, id: 'MessageContainer', class: "row-fluid MessageContainer", data: { url: inspection_chat_messages_url(@inspection) } do -%>
                          <% chat_html = render partial: 'chat_messages/chat_message', collection: @inspection.chat_messages, as: :chat_message, locals: {inspection: @inspection }   %>
                          <%= chat_html || 'Be the first to write a message'%>
                      <% end -%>
                  <% end -%>
                </div>

                <% if can? :create, ChatMessage, inspection_id: @inspection.id %>
                    <div class="row-fluid SendMessage">
                      <div class="span12 SendMessageInner">
                        <%= form_for [@inspection, @inspection.chat_messages.build], remote: true do |f| %>
                            <div class="row-fluid ChatTypeBoxRow">
                              <%= f.text_area :content, id: "ChatTypeBox", class: "ChatTypeBox pull-right", rows: 2, placeholder: "Type your answer" %>


                            </div>
                            <div class="row-fluid">
                              <%= f.submit "Send", class: "btn btn-primary pull-right" %>
                            </div>
                        <% end %>
                      </div>
                    </div>
                <% end %>
              </div>
            <% end -%>
        </div>
    </div>
</div>